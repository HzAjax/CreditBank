# CreditBank

**CreditBank** ‚Äî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –∫–æ–Ω–≤–µ–π–µ—Ä–∞: –æ—Ç –ø—Ä–µ—Å–∫–æ—Ä–∏–Ω–≥–∞ –∏ —Ä–∞—Å—á—ë—Ç–∞ —É—Å–ª–æ–≤–∏–π –¥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–∞ –∏ –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ API-Gateway.

## –°–æ—Å—Ç–∞–≤ –ø—Ä–æ–µ–∫—Ç–∞

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

1. **calculator** ‚Äî —Ä–∞—Å—á—ë—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞

* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π: `/calculator/offers`
* –ü–æ–ª–Ω—ã–π —Ä–∞—Å—á—ë—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫—Ä–µ–¥–∏—Ç–∞ —Å —É—á—ë—Ç–æ–º —Å–∫–æ—Ä–∏–Ω–≥–∞: `/calculator/calc`
* Swagger UI: `http://localhost:8080/swagger-ui.html`

2. **deal** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–æ–π

* –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç —É—Å–ª–æ–≤–∏–π: `/deal/statement`
* –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: `/deal/offer/select`
* –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç —Å –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ–º `calculator`: `/deal/calculate/{statementId}`
* Liquibase-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ë–î, –ª–æ–≥–∏, Swagger, 100% unit-—Ç–µ—Å—Ç—ã (Mockito).
* Swagger UI: `http://localhost:8081/swagger-ui.html`&#x20;

3. **statement** ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ –ø—Ä–µ—Å–∫–æ—Ä–∏–Ω–≥

* –ü—Ä–µ—Å–∫–æ—Ä–∏–Ω–≥ + –∑–∞–ø—Ä–æ—Å –≤ `deal` –Ω–∞ —Ä–∞—Å—á—ë—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
* –§–∏–∫—Å–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –ø–µ—Ä–µ—Å—ã–ª–∫–∞ –≤ `deal`
* Swagger UI: `http://localhost:8082/swagger-ui.html`&#x20;

4. **dossier** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É

* –û–±—Ä–∞–±–æ—Ç–∫–∞ Kafka-—Å–æ–±—ã—Ç–∏–π —ç—Ç–∞–ø–æ–≤ —Å–¥–µ–ª–∫–∏: `finish-registration`, `create-documents`, `send-documents`, `send-ses`, `credit-issued`, `statement-denied`
* –ü–∏—Å—å–º–∞ –Ω–∞ HTML-—à–∞–±–ª–æ–Ω–∞—Ö, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF, –æ—Ç–ø—Ä–∞–≤–∫–∞ email/SES

5. **gateway** ‚Äî API-—à–ª—é–∑

* –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫ `deal` –∏ `statement`
* Circuit Breaker + fallback-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
* –ê–≥—Ä–µ–≥–∞—Ü–∏—è OpenAPI –¥–ª—è Swagger UI
* Swagger UI: `http://localhost:8084/webjars/swagger-ui/index.html`&#x20;

---

## –û–±—â–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `MyLib` (–ø–∞–ø–∫–∏ `logging`, `error-handling`, `my-lib-starter`) ‚Äî —Å–≤–æ–π Gradle-–ø—Ä–æ–µ–∫—Ç —Å–æ **—Å—Ç–∞—Ä—Ç–µ—Ä–æ–º**.
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:

* **logging** ‚Äî –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö/–∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è.
* **error-handling** ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π `ControllerExceptionHandler` + `ErrorMessageDto` –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫.
* **my-lib-starter** ‚Äî –∞–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Spring Boot –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ—à–∏–±–æ–∫ –∫ –ª—é–±–æ–º—É —Å–µ—Ä–≤–∏—Å—É.

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–ø—Ä–∏–º–µ—Ä Gradle)

```groovy
dependencies {
    implementation("com.your-org:mylib-starter:<version>")
}
```

> –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å—Ç–∞—Ä—Ç–µ—Ä –ø–æ–¥—Ç—è–Ω–µ—Ç `logging` –∏ `error-handling` –∏ –≤–∫–ª—é—á–∏—Ç –∞–≤—Ç–æ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞.

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `creditbank`.
2. –î–ª—è Kafka –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å 6 —Ç–æ–ø–∏–∫–æ–≤: `finish-registration`, `create-documents`, `send-documents`, `send-ses`, `credit-issued`, `statement-denied`.
3. –ü–æ–¥–Ω–∏–º–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –≤ –ø–æ—Ä—è–¥–∫–µ: `calculator` ‚Üí `deal` ‚Üí `statement` ‚Üí `dossier` ‚Üí `gateway`. 
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Swagger UI –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (—Å–º. –∞–¥—Ä–µ—Å–∞ –≤—ã—à–µ). 
5. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø–æ—Ç–æ–∫:

    * POST –≤ `statement` –¥–ª—è –ø—Ä–µ—Å–∫–æ—Ä–∏–Ω–≥–∞ ‚Üí –ø–æ–ª—É—á–∏—Ç—å 4 –æ—Ñ—Ñ–µ—Ä–∞&#x20;
    * –í—ã–±—Ä–∞—Ç—å –æ—Ñ—Ñ–µ—Ä ‚Üí –ø–µ—Ä–µ–¥–∞—Ç—å –≤ `deal` `/deal/offer/select`&#x20;
    * –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç —á–µ—Ä–µ–∑ `deal` `/deal/calculate/{statementId}`&#x20;
    * –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ `dossier` –ø–æ —Å–æ–±—ã—Ç–∏—è–º Kafka&#x20;
    * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ `gateway` –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤&#x20;

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏

* **Java 17+, Spring Boot 3**, Spring Cloud Gateway, Kafka, Liquibase
* **OpenAPI/Swagger** –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö&#x20;
* Unit-—Ç–µ—Å—Ç—ã: **JUnit + Mockito**, —Ü–µ–ª–µ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ 100% —Å–µ—Ä–≤–∏—Å–Ω–æ–π –ª–æ–≥–∏–∫–∏
* –ï–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É **MyLib** (—Å—Ç–∞—Ä—Ç–µ—Ä)

---

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã Swagger

* calculator: `http://localhost:8080/swagger-ui.html`&#x20;
* deal: `http://localhost:8081/swagger-ui.html`&#x20;
* statement: `http://localhost:8082/swagger-ui.html`&#x20;
* gateway: `http://localhost:8084/webjars/swagger-ui/index.html`&#x20;

---

## –î–∏–∞–≥—Ä–∞–º–º–∞

```
[Client] ‚Üí [Gateway] ‚Üí [Statement] ‚Üí [Deal] ‚Üî [Calculator]
                               ‚Üì
                           [Dossier] ‚Üê Kafka events
```

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

| –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å | –ü–æ–∫—Ä—ã—Ç–∏–µ                                                                                  |
|-------------|-------------------------------------------------------------------------------------------|
| calculator  | ![Coverage](https://codecov.io/gh/HzAjax/CreditBank/branch/main/graph/badge.svg?flag=calculator) |
| deal        | ![Coverage](https://codecov.io/gh/HzAjax/CreditBank/branch/main/graph/badge.svg?flag=deal) |
| statement   | ![Coverage](https://codecov.io/gh/HzAjax/CreditBank/branch/main/graph/badge.svg?flag=statement) |
| dossier     | ![Coverage](https://codecov.io/gh/HzAjax/CreditBank/branch/main/graph/badge.svg?flag=dossier) |

